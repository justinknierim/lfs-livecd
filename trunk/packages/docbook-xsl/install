#!/bin/bash
install -d /usr/share/xml/docbook/xsl-stylesheets-1.67.2 &&
chown -R root:root . &&
cp -af INSTALL VERSION common eclipse extensions fo html htmlhelp \
    images javahelp lib manpages params profiling template xhtml \
    /usr/share/xml/docbook/xsl-stylesheets-1.67.2 &&
install -d /usr/share/doc/xml &&
cp -af doc/* /usr/share/doc/xml &&
cd /usr/share/xml/docbook/xsl-stylesheets-1.67.2 &&
sh INSTALL &&
if [ ! -f /etc/xml/catalog ]; then mkdir -p /etc/xml; xmlcatalog \
    --noout --create /etc/xml/catalog; fi &&
if [ ! -e /etc/xml/docbook ]; then xmlcatalog --noout --create \
    /etc/xml/docbook; fi &&
xmlcatalog --noout --add "rewriteSystem" \
    "http://docbook.sourceforge.net/release/xsl/1.67.2" \
    "/usr/share/xml/docbook/xsl-stylesheets-1.67.2" /etc/xml/catalog &&
xmlcatalog --noout --add "rewriteURI" \
    "http://docbook.sourceforge.net/release/xsl/1.67.2" \
    "/usr/share/xml/docbook/xsl-stylesheets-1.67.2" /etc/xml/catalog &&
xmlcatalog --noout --add "delegateSystem" \
    "http://docbook.sourceforge.net/release/xsl/" \
    "file:///etc/xml/docbook" /etc/xml/catalog &&
xmlcatalog --noout --add "delegateURI" \
    "http://docbook.sourceforge.net/release/xsl/" \
    "file:///etc/xml/docbook" /etc/xml/catalog &&
xmlcatalog --noout --add "rewriteSystem" \
    "http://docbook.sourceforge.net/release/xsl/1.65.1" \
    "/usr/share/xml/docbook/xsl-stylesheets-1.67.2" \
    /etc/xml/catalog &&
xmlcatalog --noout --add "rewriteURI" \
    "http://docbook.sourceforge.net/release/xsl/1.65.1" \
    "/usr/share/xml/docbook/xsl-stylesheets-1.67.2" \
    /etc/xml/catalog
