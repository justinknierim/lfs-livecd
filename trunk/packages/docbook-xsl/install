#!/bin/bash
install -v -d -m755 /usr/share/xml/docbook/xsl-stylesheets-1.68.1 &&
install -v -d -m755 /etc/xml &&
chown -R root:root . &&
cp -v -af INSTALL VERSION common eclipse extensions fo html htmlhelp \
    images javahelp lib manpages params profiling template xhtml \
    /usr/share/xml/docbook/xsl-stylesheets-1.68.1 &&
install -v -d -m755 /usr/share/doc/xml &&
cp -v -af doc/* /usr/share/doc/xml &&
cd /usr/share/xml/docbook/xsl-stylesheets-1.68.1 &&
sh INSTALL &&
if [ ! -f /etc/xml/catalog ]; then
    xmlcatalog --noout --create /etc/xml/catalog
fi &&
if [ ! -f /etc/xml/docbook ]; then
    xmlcatalog --noout --create /etc/xml/docbook
fi &&
xmlcatalog --noout --add "rewriteSystem" \
    "http://docbook.sourceforge.net/release/xsl/1.68.1" \
    "/usr/share/xml/docbook/xsl-stylesheets-1.68.1" \
    /etc/xml/catalog &&
xmlcatalog --noout --add "rewriteURI" \
    "http://docbook.sourceforge.net/release/xsl/1.68.1" \
    "/usr/share/xml/docbook/xsl-stylesheets-1.68.1" \
    /etc/xml/catalog &&
xmlcatalog --noout --add "rewriteSystem" \
    "http://docbook.sourceforge.net/release/xsl/current" \
    "/usr/share/xml/docbook/xsl-stylesheets-1.68.1" \
    /etc/xml/catalog &&
xmlcatalog --noout --add "rewriteURI" \
    "http://docbook.sourceforge.net/release/xsl/current" \
    "/usr/share/xml/docbook/xsl-stylesheets-1.68.1" \
    /etc/xml/catalog &&
xmlcatalog --noout --add "delegateSystem" \
    "http://docbook.sourceforge.net/release/xsl/" \
    "file:///etc/xml/docbook" \
    /etc/xml/catalog &&
xmlcatalog --noout --add "delegateURI" \
    "http://docbook.sourceforge.net/release/xsl/" \
    "file:///etc/xml/docbook" \
    /etc/xml/catalog &&
xmlcatalog --noout --add "rewriteSystem" \
    "http://docbook.sourceforge.net/release/xsl/1.67.2" \
    "/usr/share/xml/docbook/xsl-stylesheets-1.68.1" \
    /etc/xml/catalog &&
xmlcatalog --noout --add "rewriteURI" \
    "http://docbook.sourceforge.net/release/xsl/1.67.2" \
    "/usr/share/xml/docbook/xsl-stylesheets-1.68.1" \
    /etc/xml/catalog
